(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],p=0,d=[];p<i.length;p++)o=i[p],s[o]&&d.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},s={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/expense-report/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"028b":function(e,t,n){"use strict";var a=n("b763"),s=n.n(a);s.a},"034f":function(e,t,n){"use strict";var a=n("64a9"),s=n.n(a);s.a},1153:function(e,t,n){"use strict";var a=n("62e1"),s=n.n(a);s.a},"149c":function(e,t,n){"use strict";var a=n("76bc"),s=n.n(a);s.a},"239d":function(e,t,n){"use strict";var a=n("647d"),s=n.n(a);s.a},"39e2":function(e,t,n){},5660:function(e,t,n){"use strict";var a=n("39e2"),s=n.n(a);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),s=n("0ff2"),r=n("59ca"),o=n.n(r),i=(n("e71f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Navbar",{on:{"select-month":e.selectMonth}}),n("router-view",{attrs:{selectedMonth:e.selectedMonth}})],1)}),c=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"navbar fixed-top navbar-expand-lg navbar-light bg-light"},[n("router-link",{staticClass:"navbar-brand",attrs:{to:"/expenses"}},[e._v("Classify")]),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarText"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.user,expression:"user"}],staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",to:"/expenses"}},[e._v("Expenses")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",to:"/diagrams"}},[e._v("Diagrams")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",to:"/preset"}},[e._v("Preset")])],1),n("li",{staticClass:"nav-item ml-5"},[n("ExpenseReportSelector",{attrs:{months:e.firebaseExpenses},on:{"select-month":e.selectMonth}})],1)]),n("ul",{staticClass:"navbar-nav ml-auto mr-5"},[e.user?n("span",{staticClass:"navbar-text"},[e._v(e._s(e.user.displayName||e.user.email))]):e._e(),e.user?n("li",{staticClass:"nav-item ml-5"},[n("a",{staticClass:"btn btn-light",attrs:{href:""},on:{click:e.logout}},[e._v("Logout")])]):n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",to:"/login"}},[e._v("Sign In")])],1)]),n("a",{staticClass:"github-corner",attrs:{href:"https://github.com/nitoloz/expense-report","aria-label":"View source on GitHub"}},[n("svg",{staticClass:"octocat",attrs:{width:"80",height:"80",viewBox:"0 0 250 250","aria-hidden":"true"}},[n("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),n("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,\n    72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),n("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,\n    98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,\n    40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,\n    77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,\n    112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])])],1)},u=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("select",{staticClass:"form-control",on:{change:function(t){e.$emit("select-month",t)}}},[n("option",{attrs:{selected:"",disabled:""}},[e._v("Select month")]),e._l(e.months,function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.id))])})],2)])},d=[],f={name:"ExpenseReportSelector",props:{months:Array}},h=f,m=n("2877"),v=Object(m["a"])(h,p,d,!1,null,"48f00bbb",null);v.options.__file="ExpenseReportSelector.vue";var E=v.exports,x=(n("ea7b"),{name:"Navbar",components:{ExpenseReportSelector:E},methods:{selectMonth:function(e){this.$emit("select-month",e.target.value)},logout:function(){var e=this;o.a.auth().signOut().then(function(){e.$router.push("/login")})}},data:function(){return{firebaseExpenses:[],user:o.a.auth().currentUser}},mounted:function(){var e=this;o.a.auth().onAuthStateChanged(function(t){e.user=t})},firestore:function(){return{firebaseExpenses:Tt.collection("expenses")}}}),b=x,g=(n("5660"),Object(m["a"])(b,l,u,!1,null,"26df6af9",null));g.options.__file="Navbar.vue";var _=g.exports,C={name:"app",components:{Navbar:_},methods:{selectMonth:function(e){this.selectedMonth=e}},data:function(){return{selectedMonth:""}}},y=C,S=(n("034f"),Object(m["a"])(y,i,c,!1,null,null,null));S.options.__file="App.vue";var A=S.exports,w=n("8c4f"),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("h4",{staticClass:"col-sm-9"},[e.selectedMonth?n("span",[e._v("("+e._s(e.currentExpenseIndex+1)+"/"+e._s(e.selectedMonthSize)+")")]):e._e()]),n("div",{staticClass:"col-sm-3"},[n("ExpenseReportUpload")],1)]),e.selectedMonth&&e.selectedExpense?n("ExpenseItem",{attrs:{item:e.selectedExpense},on:{"click-left":e.viewPrevious,"click-right":e.viewNext}}):e._e(),e.selectedMonth?n("ExpenseTypesList",{attrs:{selectedType:e.selectedExpense.ExpenseType},on:{"select-type":e.onSelectType}}):n("h3",[e._v(" Please select expenses month to start classification or upload new file!")])],1)},N=[],T=(n("6b54"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"row"},[n("div",{staticClass:"col-sm-1"},[n("i",{staticClass:"fas fa-chevron-left mr-5",on:{click:function(t){e.$emit("click-left")}}})]),n("div",{staticClass:"col-sm-10 expense-item-property"},[n("div",{staticClass:"width-60"},[e._v(e._s(e.item[e.ExpenseItem.EXPENSE_NAME])+",")]),n("div",{staticClass:"width-20"},[e._v(e._s(e.item[e.ExpenseItem.PURCHASE_DATE])+",")]),n("div",{staticClass:"width-20"},[e._v(e._s(e.item[e.ExpenseItem.PURCHASE_AMOUNT])+" EUR")])]),n("div",{staticClass:"col-sm-1"},[n("i",{staticClass:"fas fa-chevron-right ml-5",on:{click:function(t){e.$emit("click-right")}}})])])])}),k=[],O=n("d225"),M=n("bd86"),I=function e(){Object(O["a"])(this,e)};Object(M["a"])(I,"EXPENSE_NAME","Umsatz/Ort"),Object(M["a"])(I,"PURCHASE_DATE","Kaufdatum"),Object(M["a"])(I,"PURCHASE_AMOUNT","Betrag in EUR"),Object(M["a"])(I,"PURCHASE_AMOUNT_SHORT","Betrag"),Object(M["a"])(I,"EXPENSE_TYPE","ExpenseType"),Object(M["a"])(I,"EXPENSE_TYPE_LABEL","Expense Type");var U={name:"ExpenseItem",props:{item:Object},data:function(){return{ExpenseItem:I}},mounted:function(){var e=this;window.addEventListener("keydown",function(t){"ArrowRight"===t.code&&e.$emit("click-right"),"ArrowLeft"===t.code&&e.$emit("click-left"),t.preventDefault()})}},R=U,L=(n("6ccc"),Object(m["a"])(R,T,k,!1,null,"835d0eb8",null));L.options.__file="ExpenseItem.vue";var j=L.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},e._l(e.types,function(t){return n("div",{key:t.name,staticClass:"col-sm-3"},[n("div",{staticClass:"card mt-2",class:{selected:t.name===e.selectedType}},[n("div",{staticClass:"card-body",on:{click:function(n){e.$emit("select-type",t.name)}}},[n("h5",{staticClass:"card-title"},[e._v(" "+e._s(t.name))]),n("i",{staticClass:"fas fa-6x",class:t.icon})])])])}),0)},$=[],B=function e(){Object(O["a"])(this,e)};Object(M["a"])(B,"LEBENSMITTEL","Lebensmittel"),Object(M["a"])(B,"RESTAURANTS","Restaurants"),Object(M["a"])(B,"TRANSPORT","Transport"),Object(M["a"])(B,"REISEN","Reisen"),Object(M["a"])(B,"HAUS","Haus"),Object(M["a"])(B,"UNTERHALTUNG","Unterhaltung"),Object(M["a"])(B,"SHOPPING","Shopping"),Object(M["a"])(B,"LEHRE","Lehre"),Object(M["a"])(B,"MEDIZIN","Medizin"),Object(M["a"])(B,"HAUSHALTSWAREN","Haushaltswaren"),Object(M["a"])(B,"SONSTIG","Sonstig"),Object(M["a"])(B,"OTHER","Other");var X=["Lebensmittel","Restaurants","Transport","Reisen","Haus","Unterhaltung","Shopping","Lehre","Medizin","Haushaltswaren","Sonstig","Other"],z={name:"ExpenseTypesList",props:{selectedType:String},data:function(){return{types:[{name:B.LEBENSMITTEL,icon:"fa-apple-alt"},{name:B.RESTAURANTS,icon:"fa-utensils"},{name:B.TRANSPORT,icon:"fa-bus-alt"},{name:B.REISEN,icon:"fa-plane"},{name:B.HAUS,icon:"fa-home"},{name:B.UNTERHALTUNG,icon:"fa-beer"},{name:B.SHOPPING,icon:"fa-shopping-cart"},{name:B.LEHRE,icon:"fa-user-graduate"},{name:B.MEDIZIN,icon:"fa-briefcase-medical"},{name:B.HAUSHALTSWAREN,icon:"fa-hammer"},{name:B.SONSTIG,icon:"fa-bullseye"}]}}},G=z,F=(n("149c"),Object(m["a"])(G,H,$,!1,null,"181092de",null));F.options.__file="ExpenseTypesList.vue";var D=F.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{staticClass:"btn btn-primary float-right",attrs:{type:"button"},on:{click:function(t){e.selectFileClick()}}},[e._v("Upload file")]),n("input",{ref:"fileInput",attrs:{type:"file",accept:".csv"},on:{change:e.fileChanged}})])},W=[],J=(n("ac6a"),n("7f7f"),n("7514"),n("e814")),Z=n.n(J),K=(n("28a5"),n("b0b4")),V=["January","February","March","April","May","June","July","August","September","October","November","December"],q=[{type:B.LEBENSMITTEL,expenses:["rewe","aldi sued","tegut","lidl","too good to go","alnatura"]},{type:B.SHOPPING,expenses:["amazon","computerunive","conrad","karstadt","aliexpress","yves rocher","mango","h&m","amzn","saturn","hunkemoeller","hollister"]},{type:B.REISEN,expenses:["heinemann","flixbus","tuifly","condor","rent-a-car","hotel","auto europe","esso","lufthansa","aeroflot","ryanair","flughafen"]},{type:B.RESTAURANTS,expenses:["nordsee","starbucks","kamonsushibar","cafe bar celona","restaurant","hooters","sushi","moti mahal","lieferheld","mcdonalds","bareburger","naiv"]},{type:B.MEDIZIN,expenses:["apotheke","docmorris"]},{type:B.TRANSPORT,expenses:["rmv.de"]},{type:B.HAUSHALTSWAREN,expenses:["mueller","dm-drogerie","das depot"]},{type:B.UNTERHALTUNG,expenses:["steamgames","itunes"]}],Q=function(){function e(){Object(O["a"])(this,e)}return Object(K["a"])(e,[{key:"processUploadedFile",value:function(e){for(var t=[],n=e.split(/\r\n|\n/).map(function(e){return e.split(";")}),a=n[0][n[0].length-1],s=function(e){var s={};n[e].forEach(function(e,t){return s[n[0][t].trim()]=e.trim()}),s[a]=s[a]?Z()(s[a]):0,t.push(s)},r=1;r<n.length;r++)s(r);return t.filter(function(e){return e[a]<0})}},{key:"autoClassifyExpenses",value:function(e){return e.filter(function(e){return!e[I.EXPENSE_TYPE]}).forEach(function(e){var t=q.find(function(t){return t.expenses.some(function(t){return-1!==e[I.EXPENSE_NAME].toLowerCase().indexOf(t)})});t&&(e[I.EXPENSE_TYPE]=t.type)}),e}},{key:"processFileName",value:function(e){var t=e.substring(23,33).split("-");return"".concat(V[Z()(t[1])-1]," ").concat(t[0])}}]),e}(),ee=new Q,te={name:"ExpenseReportUpload",methods:{selectFileClick:function(){this.$refs.fileInput.click()},fileChanged:function(){var e=new FileReader,t=ee.processFileName(this.$refs.fileInput.files[0].name);e.onload=function(){Tt.collection("expenses").doc(t).delete(),Tt.collection("expenses").doc(t).set({uploaded:new Date});var n=ee.processUploadedFile(e.result),a=ee.autoClassifyExpenses(n);Tt.collection("presetExpenses").get().then(function(e){e.forEach(function(e){a.push(e.data())}),a.forEach(function(e,n){return Tt.collection("expenses").doc(t).collection("data").doc(n.toString()).set(e)})})},e.readAsText(this.$refs.fileInput.files[0])}},data:function(){return{file:null}}},ne=te,ae=(n("cc60"),Object(m["a"])(ne,Y,W,!1,null,"017fddc2",null));ae.options.__file="ExpenseReportUpload.vue";var se=ae.exports,re={name:"ExpenseClassifier",props:{selectedMonth:String},components:{ExpenseItem:j,ExpenseTypesList:D,ExpenseReportUpload:se},watch:{selectedMonth:function(){this.monthSelected()}},methods:{onSelectType:function(e){Tt.collection("expenses").doc(this.selectedMonth).collection("data").doc(this.currentExpenseIndex.toString()).update({ExpenseType:e}),this.viewNext()},viewPrevious:function(){this.currentExpenseIndex=this.currentExpenseIndex>0?this.currentExpenseIndex-1:this.selectedMonthSize-1,this.$bind("selectedExpense",Tt.collection("expenses").doc(this.selectedMonth).collection("data").doc(this.currentExpenseIndex.toString()))},viewNext:function(){this.currentExpenseIndex=this.currentExpenseIndex<this.selectedMonthSize-1?this.currentExpenseIndex+1:0,this.$bind("selectedExpense",Tt.collection("expenses").doc(this.selectedMonth).collection("data").doc(this.currentExpenseIndex.toString()))},monthSelected:function(){this.currentExpenseIndex=0;var e=this;Tt.collection("expenses").doc(this.selectedMonth).collection("data").get().then(function(t){e.selectedMonthSize=t.size}),this.$bind("selectedExpense",Tt.collection("expenses").doc(this.selectedMonth).collection("data").doc(this.currentExpenseIndex.toString()))}},data:function(){return{currentExpenseIndex:0,selectedExpense:{},selectedMonthSize:0}},mounted:function(){this.selectedMonth&&this.monthSelected()}},oe=re,ie=Object(m["a"])(oe,P,N,!1,null,"65f5830c",null);ie.options.__file="ExpenseClassifier.vue";var ce=ie.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-7"},[n("PieChart",{attrs:{data:e.expenses,month:e.selectedMonth},on:{"select-pie-section":e.selectPieChartSection}})],1),n("div",{staticClass:"col-lg-5 expenses-list"},[n("ExpenseList",{attrs:{expensesSection:e.expensesSection}})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12"},[n("BarChart",{attrs:{data:e.expenses}})],1)]),e.selectedMonth?e._e():n("h3",[e._v(" Please select expenses month to view diagram!")])])},ue=[],pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},de=[],fe=n("5698"),he=(n("55dd"),fe["l"]().domain(["Lebensmittel","Restaurants","Transport","Reisen","Haus","Unterhaltung","Shopping","Lehre","Medizin","Haushaltswaren","Sonstig","Other"]).range(["#8dd3c7","#ffffb3","#bebada","#d9d9d9","#80b1d3","#fdb462","#b3de69","#fccde5","#fb8072","#bc80bd","#ccebc5","#ffed6f"])),me={top:50,right:50,bottom:50,left:100},ve=function(){function e(){Object(O["a"])(this,e)}return Object(K["a"])(e,null,[{key:"appendXAxisTitle",value:function(e,t,n,a){e.append("text").attr("class","label x axis").attr("y",n).attr("x",t).attr("dy",".71em").style("text-anchor","end").style("font-size","12").style("fill","black").text(a)}},{key:"appendYAxisTitle",value:function(e,t,n,a){e.append("text").attr("class","label y axis").attr("transform","rotate(-90)").attr("x",t).attr("y",n).attr("dy",".71em").style("font-size","12").style("fill","black").style("text-anchor","end").text(a)}},{key:"appendTitle",value:function(e,t,n,a){e.append("text").attr("class","title").attr("x",t).attr("y",n).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text(a)}}]),e}();function Ee(){var e,t={width:1e3,height:600,data:[],groupByOptionLabel:"City",valueLabel:"Respondents",colorScale:he,tooltipFormatter:function(e){return'<tspan x="0">'.concat(r,": ").concat(e.data.key,'</tspan>\n                    <tspan x="0" dy="1.2em">').concat(o,": ").concat(e.data.value.value," EUR (").concat(e.data.value.percentageValue,"%)</tspan>")},placeHolderTooltip:null,clickCallback:null},n=t.width,a=t.height,s=t.data,r=t.groupByOptionLabel,o=t.valueLabel,i=t.colorScale,c=t.placeHolderTooltip,l=t.clickCallback,u=t.tooltipFormatter,p=null;function d(t){t.each(function(){var r=t.append("svg").attr("height",a).attr("width",n),o=r.append("g").attr("transform","translate(".concat(n/2,", ").concat(a/2,")")),d=Math.min(n,a)/2,f=fe["a"]().innerRadius(.5*d).outerRadius(.75*d).cornerRadius(8),h=fe["a"]().outerRadius(.75*d).innerRadius(.85*d),m=fe["i"]().value(function(e){return e.value.value}).sort(null),v=o.selectAll("path").data(m(s)).enter().append("path").attr("d",f).attr("fill",function(e){return i(e.data.key)}).style("stroke","white");function E(e){var t=fe["e"](e.startAngle+.1,e.endAngle);return function(n){return e.endAngle=t(n),f(e)}}function x(e){var t=fe["e"](e.startAngle,e.endAngle);return function(n){return e.startAngle=t(n),f(e)}}function b(e){e.on("mouseover",function(e){fe["n"](".tooltipCircle").remove(),_(u(e),i(e.data.key))}).on("mouseout",function(){fe["n"](".tooltipCircle").remove(),c&&_(c,"white")})}function g(e){e.on("click",function(e){l(e.data)})}function _(e,t){o.append("text").attr("class","tooltipCircle").attr("dy",-15).html(function(){return e}).style("font-size","1.1em").style("text-anchor","middle"),o.append("circle").attr("class","tooltipCircle").attr("r",.45*d).style("fill",t).style("fill-opacity",.35).call(g)}function C(e){return e.startAngle+(e.endAngle-e.startAngle)/2}v.call(b),v.call(g),c&&_(c,"white"),o.selectAll(".label").data(m(s)).enter().append("text").attr("class","label").attr("dy",".35em").html(function(e){return'<tspan text-decoration="underline">'.concat(e.data.key,"</tspan>: <tspan>").concat(e.data.value.value," EUR</tspan>")}).attr("transform",function(t){var n=h.centroid(t);return n[0]=.8*d*(C(t)<Math.PI?1:-1),n[1]=e&&Math.abs(e-n[1])<20?e-20:n[1],e=n[1],"translate("+n+")"}).style("text-anchor",function(e){return C(e)<Math.PI?"start":"end"}),o.datum(s).selectAll("polyline").data(m).enter().append("polyline").attr("fill","none").attr("stroke-width",1).attr("stroke","black").attr("points",function(t){var n=h.centroid(t);return n[0]=.8*d*(C(t)<Math.PI?1:-1),n[1]=e&&Math.abs(e-n[1])<20?e-20:n[1],e=n[1],[f.centroid(t),[h.centroid(t)[0],n[1]],n]}),p=function(){var t=m(s),n=o.selectAll("path").data(t),a=o.selectAll(".label").data(t),r=o.selectAll("polyline").data(t),l=n.enter().append("path").attr("fill",function(e){return i(e.data.key)}).attr("d",f);l.call(b),l.call(g),n.transition().ease(fe["d"]).duration(750).attr("fill",function(e){return i(e.data.key)}).attrTween("d",E),n.exit().transition().ease(fe["d"]).duration(100).attrTween("d",x).remove(),a.enter().append("text").attr("class","label").attr("dy",".35em").html(function(e){return"".concat(e.data.key,": <tspan>").concat(e.data.value.value,"</tspan>")}).style("text-anchor",function(e){return C(e)<Math.PI?"start":"end"}),a.transition().ease(fe["d"]).duration(750).style("text-anchor",function(e){return C(e)<Math.PI?"start":"end"}).style("opacity",0).on("end",function(){fe["m"](this).html(function(e){return"".concat(e.data.key,": <tspan>").concat(e.data.value.value,"</tspan>")}).style("opacity",1)}),a.exit().transition().ease(fe["d"]).duration(100).remove(),r.enter().append("polyline").attr("fill","none").attr("stroke-width",1).attr("stroke","black"),r.exit().transition().ease(fe["d"]).duration(100).remove(),e=null,o.selectAll(".label").attr("transform",function(t){var n=h.centroid(t);return n[0]=.8*d*(C(t)<Math.PI?1:-1),n[1]=e&&Math.abs(e-n[1])<20?e-20:n[1],e=n[1],"translate("+n+")"}),e=null,o.selectAll("polyline").attr("points",function(t){var n=h.centroid(t);return n[0]=.8*d*(C(t)<Math.PI?1:-1),n[1]=e&&Math.abs(e-n[1])<20?e-20:n[1],e=n[1],[f.centroid(t),[h.centroid(t)[0],n[1]],n]}),fe["n"](".tooltipCircle").remove(),_(c,"white")}})}return d.width=function(e){return arguments.length?(n=e,d):n},d.height=function(e){return arguments.length?(a=e,d):a},d.groupByOptionLabel=function(e){return arguments.length?(r=e,d):r},d.valueLabel=function(e){return arguments.length?(o=e,d):o},d.colorScale=function(e){return arguments.length?(i=e,d):i},d.clickCallback=function(e){return arguments.length?(l=e,d):l},d.placeHolderTooltip=function(e){return arguments.length?(c=e,d):c},d.tooltipFormatter=function(e){return arguments.length?(u=null==e?t.tooltipFormatter:e,d):u},d.data=function(e){return arguments.length?(s=e,0===d.colorScale().domain().length&&d.colorScale().domain(s.map(function(e){return e.key})),"function"===typeof p&&p(),d):s},d}var xe,be={pieChart:Ee},ge=(n("c5f6"),n("2d7d")),_e=n.n(ge),Ce="Other",ye=function(){function e(){Object(O["a"])(this,e)}return Object(K["a"])(e,[{key:"processPieChartData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.02,a=new _e.a;e.forEach(function(e){return a[e[t]]?a[e[t]]+=e[I.PURCHASE_AMOUNT]:a[e[t]]=e[I.PURCHASE_AMOUNT]});var s=fe["o"](e.map(function(e){return e[I.PURCHASE_AMOUNT]})),r=function(e,t){return t.key===Ce?-1:e.key===Ce?Number.MAX_VALUE:t.value.value-e.value.value};return fe["h"]().key(function(e){return a[e[t]]/s>n&&e[t]||Ce}).rollup(function(e){var t=e.map(function(e){return e[I.PURCHASE_AMOUNT]});return{value:-1*fe["o"](t),percentageValue:Math.round(fe["o"](t)/s*100)}}).entries(e).sort(r)}}]),e}(),Se=new ye,Ae={name:"PieChart",props:{data:Array,month:String},watch:{data:function(e){if(e.length>0){this.expensesGroups=Se.processPieChartData(e,I.EXPENSE_TYPE);var t='<tspan x="0">'.concat(this.month,'</tspan>\n                              <tspan x="0" dy="1.2em">Total spendings: <tspan font-weight="bold">').concat(-1*fe["o"](e.map(function(e){return e[I.PURCHASE_AMOUNT]}))," EUR</tspan></tspan>");xe.groupByOptionLabel("Expense Type").placeHolderTooltip(t).clickCallback(this.pieChartSectorClick).data(this.expensesGroups),0===fe["m"](this.$el).selectAll("svg").size()&&fe["m"](this.$el).call(xe)}}},methods:{pieChartSectorClick:function(e){this.$emit("select-pie-section",e)}},data:function(){return{expensesGroups:[]}},created:function(){xe=be.pieChart().width(880).height(600).valueLabel(I.PURCHASE_AMOUNT)}},we=Ae,Pe=(n("028b"),Object(m["a"])(we,pe,de,!1,null,"f0895702",null));Pe.options.__file="PieChart.vue";var Ne=Pe.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},ke=[],Oe=n("b6d0"),Me=n.n(Oe),Ie=n("75fc"),Ue=n("6a04");function Re(){var e={width:1e3,height:600,data:[],xAxisLabel:"Month",yAxisLabel:"Expenses (EUR)",colorScale:he,tooltipFormatter:function(e){return"".concat(s,": ").concat(e.key,"<br>\n            ").concat(r,": ").concat(e.value)}},t=e.width,n=e.height,a=e.data,s=e.xAxisLabel,r=e.yAxisLabel,o=e.colorScale,i=e.tooltipFormatter;function c(e){e.each(function(){var c=this,l=e.append("svg").attr("height",n).attr("width",t),u=Object(Ie["a"])(new Me.a(a.map(function(e){return e.values.map(function(e){return Z()(e.key)})}).flat())).sort(function(e,t){return e-t}),p=a.map(function(e){return e.values.map(function(e){return Z()(e.value)})}).flat(),d=fe["j"]().rangeRound([me.left,t-me.right]).paddingInner(.1).domain(u),f=fe["j"]().padding(.05).domain(a.map(function(e){return e.key})).rangeRound([0,d.bandwidth()]),h=fe["k"]().domain([fe["g"](p),fe["f"](p)]).range([n-me.top,me.bottom]),m=fe["b"](d).tickSizeOuter(0),v=l.append("g").attr("class","x axis").attr("transform","translate(0,".concat(n-me.top,")")).call(m),E=fe["c"](h).tickFormat(function(e){return"".concat(e," EUR")}).ticks(10).tickSize(-t+me.left+me.right).tickSizeOuter(0),x=l.append("g").attr("class","y axis").attr("transform","translate(".concat(me.left,",0)")).call(E);ve.appendXAxisTitle(v,t-me.right,-25,s),ve.appendYAxisTitle(x,-50,5,r),ve.appendTitle(l,t/2,me.top/2,"".concat(r," vs ").concat(s));var b=Object(Ue["a"])().attr("class","d3-tip").offset([-8,0]).html(i);l.call(b),l.append("g").selectAll("g").data(a).enter().selectAll("rect").data(function(e){return e.values}).enter().append("rect").attr("x",function(e){return f(e.groupKey)+d(e.key)}).attr("y",function(e){return h(e.value)}).attr("width",f.bandwidth()).attr("height",function(e){return n-h(e.value)-me.bottom}).attr("fill",function(e){return o(e.groupKey)}).on("mouseover",function(e){fe["m"](c).transition().duration(100).attr("r",10).attr("stroke-width",3),b.show(e)}).on("mouseout",function(){fe["m"](c).transition().duration(100).attr("r",5).attr("stroke-width",1),b.hide()})})}return c.width=function(e){return arguments.length?(t=e,c):t},c.height=function(e){return arguments.length?(n=e,c):n},c.xAxisLabel=function(e){return arguments.length?(s=e,c):s},c.yAxisLabel=function(e){return arguments.length?(r=e,c):r},c.colorScale=function(e){return arguments.length?(o=e,c):o},c.tooltipFormatter=function(t){return arguments.length?(i=null==t?e.tooltipFormatter:t,c):i},c.data=function(e){return arguments.length?(a=e,c):a},c}var Le,je={stackedBarChart:Re},He={name:"BarChart",props:{data:Array},watch:{data:function(e){e.length>0&&(Le.data([]),0===fe["m"](this.$el).selectAll("svg").size()&&fe["m"](this.$el).call(Le))}},data:function(){return{expensesGroups:[]}},created:function(){Le=je.stackedBarChart().width(1500).height(600)}},$e=He,Be=(n("692a"),Object(m["a"])($e,Te,ke,!1,null,"2c54e6c2",null));Be.options.__file="BarChart.vue";var Xe=Be.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.expensesSection.length>0?n("table",{staticClass:"table table-sm"},[n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("#")]),n("th",{attrs:{scope:"col"}},[e._v(e._s(e.ExpenseItem.EXPENSE_NAME))]),n("th",{attrs:{scope:"col"}},[e._v(e._s(e.ExpenseItem.PURCHASE_AMOUNT_SHORT))])])]),n("tbody",e._l(e.expensesSection,function(t,a){return n("tr",{key:t.id,staticClass:"text-left"},[n("th",{attrs:{scope:"row"}},[e._v(e._s(a+1))]),n("td",[e._v(e._s(t[e.ExpenseItem.EXPENSE_NAME]))]),n("td",[e._v(e._s(t[e.ExpenseItem.PURCHASE_AMOUNT])+" EUR")])])}),0)]):e._e()},Ge=[],Fe={name:"ExpenseList",props:{expensesSection:Array},data:function(){return{ExpenseItem:I}}},De=Fe,Ye=Object(m["a"])(De,ze,Ge,!1,null,"04834d98",null);Ye.options.__file="ExpenseList.vue";var We=Ye.exports,Je={name:"Diagrams",props:{selectedMonth:String},components:{PieChart:Ne,BarChart:Xe,ExpenseList:We},watch:{selectedMonth:function(){this.monthSelected()}},methods:{selectPieChartSection:function(e){e?"Other"===e.key?this.expensesSection=[]:this.fetchSectionExpenses(e):this.fetchSectionExpenses()},fetchSectionExpenses:function(e){e?this.$bind("expensesSection",Tt.collection("expenses").doc(this.selectedMonth).collection("data").where(I.EXPENSE_TYPE,"==",e.key).orderBy(I.PURCHASE_AMOUNT,"asc")):this.$bind("expensesSection",Tt.collection("expenses").doc(this.selectedMonth).collection("data").orderBy(I.PURCHASE_AMOUNT,"asc"))},monthSelected:function(){this.$bind("expenses",Tt.collection("expenses").doc(this.selectedMonth).collection("data")),this.fetchSectionExpenses()}},data:function(){return{expenses:[],expensesSection:[],ExpenseItem:I}},mounted:function(){this.selectedMonth&&this.monthSelected()}},Ze=Je,Ke=(n("5fe5"),Object(m["a"])(Ze,le,ue,!1,null,"090642c4",null));Ke.options.__file="Diagrams.vue";var Ve=Ke.exports,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("CreatePreset")],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("PresetList",{attrs:{presetExpenses:e.presetExpenses}})],1)])])},Qe=[],et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[e.presetExpenses.length>0?n("table",{staticClass:"table table-sm"},[n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("#")]),n("th",{attrs:{scope:"col"}},[e._v(e._s(e.ExpenseItem.EXPENSE_NAME))]),n("th",{attrs:{scope:"col"}},[e._v(e._s(e.ExpenseItem.PURCHASE_AMOUNT_SHORT))]),n("th",{attrs:{scope:"col"}},[e._v(e._s(e.ExpenseItem.EXPENSE_TYPE_LABEL))]),n("th",{attrs:{scope:"col"}},[e._v("Action")])])]),n("tbody",e._l(e.presetExpenses,function(t,a){return n("tr",{key:t.id},[n("th",{attrs:{scope:"row"}},[e._v(e._s(a+1))]),n("td",[e._v(e._s(t[e.ExpenseItem.EXPENSE_NAME]))]),n("td",[e._v(e._s(t[e.ExpenseItem.PURCHASE_AMOUNT])+" EUR")]),n("td",[e._v(e._s(t[e.ExpenseItem.EXPENSE_TYPE]))]),n("td",{staticClass:"cursor-pointer"},[n("i",{staticClass:"fas fa-edit",on:{click:function(n){e.editExpense(t.id)}}}),n("i",{staticClass:"fas fa-trash-alt ml-2",on:{click:function(n){e.removeExpense(t.id)}}})])])}),0)]):e._e()])])])},tt=[],nt={name:"PresetList",props:{presetExpenses:Array},components:{},methods:{removeExpense:function(e){Tt.collection("presetExpenses").doc(e).delete()},editExpense:function(e){console.log("Editing ".concat(e))}},data:function(){return{expenses:[],ExpenseItem:I}}},at=nt,st=(n("1153"),Object(m["a"])(at,et,tt,!1,null,"d3f5ccfc",null));st.options.__file="PresetList.vue";var rt=st.exports,ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("form",[n("div",{staticClass:"form-row text-left"},[n("div",{staticClass:"form-group col-sm-5"},[n("label",{attrs:{for:"inputName"}},[e._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newExpense[e.ExpenseItem.EXPENSE_NAME],expression:"newExpense[ExpenseItem.EXPENSE_NAME]"}],staticClass:"form-control",attrs:{id:"inputName",placeholder:"Expense name"},domProps:{value:e.newExpense[e.ExpenseItem.EXPENSE_NAME]},on:{input:function(t){t.target.composing||e.$set(e.newExpense,e.ExpenseItem.EXPENSE_NAME,t.target.value)}}})]),n("div",{staticClass:"form-group col-sm-2"},[n("label",{attrs:{for:"inputBetrag"}},[e._v("Betrag")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newExpense[e.ExpenseItem.PURCHASE_AMOUNT],expression:"newExpense[ExpenseItem.PURCHASE_AMOUNT]"}],staticClass:"form-control",attrs:{type:"number",id:"inputBetrag",placeholder:"Betrag in EUR"},domProps:{value:e.newExpense[e.ExpenseItem.PURCHASE_AMOUNT]},on:{input:function(t){t.target.composing||e.$set(e.newExpense,e.ExpenseItem.PURCHASE_AMOUNT,t.target.value)}}})]),n("div",{staticClass:"form-group col-sm-3"},[n("label",{attrs:{for:"inputBetrag"}},[e._v("Type")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.newExpense[e.ExpenseItem.EXPENSE_TYPE],expression:"newExpense[ExpenseItem.EXPENSE_TYPE]"}],staticClass:"form-control",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.newExpense,e.ExpenseItem.EXPENSE_TYPE,t.target.multiple?n:n[0])}}},[n("option",{attrs:{selected:"",disabled:"",value:""}},[e._v("Select type")]),e._l(e.expenseTypesArray,function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})],2)]),n("div",{staticClass:"col-sm-2"},[n("button",{staticClass:"btn btn-primary mt-32 float-right",attrs:{type:"submit"},on:{click:e.addExpense}},[e._v("Add expense")])])])])])},it=[],ct={name:"CreatePreset",props:{},components:{},methods:{addExpense:function(){this.newExpense[I.PURCHASE_AMOUNT]=-Z()(this.newExpense[I.PURCHASE_AMOUNT]),Tt.collection("presetExpenses").add(this.newExpense),this.newExpense=Object(M["a"])({},I.EXPENSE_TYPE,"")}},data:function(){return{ExpenseItem:I,expenseTypesArray:X,newExpense:Object(M["a"])({},I.EXPENSE_TYPE,"")}}},lt=ct,ut=(n("239d"),Object(m["a"])(lt,ot,it,!1,null,"31d6a75c",null));ut.options.__file="CreatePreset.vue";var pt=ut.exports,dt={name:"Preset",props:{selectedMonth:String},components:{PresetList:rt,CreatePreset:pt},data:function(){return{presetExpenses:[],ExpenseItem:I}},firestore:function(){return{presetExpenses:Tt.collection("presetExpenses").orderBy(I.PURCHASE_AMOUNT,"asc")}}},ft=dt,ht=Object(m["a"])(ft,qe,Qe,!1,null,"691bc6a6",null);ht.options.__file="Preset.vue";var mt=ht.exports,vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4 offset-md-4 col-sm-8 offset-sm-2 text-left"},[n("div",{staticClass:"card mt-5"},[n("div",{staticClass:"card-body"},[n("h3",{staticClass:"text-center"},[e._v("Sign In")]),n("form",[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Email address"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"formGroupExampleInput2",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:e.signIn}},[e._v("Sign in")])]),n("hr"),n("button",{staticClass:"btn btn-danger btn-block",attrs:{type:"button"},on:{click:e.googleSignIn}},[e._v("Sign in with\n                        Google\n                    ")]),n("button",{staticClass:"btn btn-dark btn-block",attrs:{type:"button"},on:{click:e.githubSignIn}},[e._v("Sign in with Github\n                    ")]),n("hr"),n("div",{staticClass:"text-center"},[e._v("\n                        Don't have an account yet?\n                        "),n("button",{staticClass:"btn btn-link no-vertical-align",attrs:{type:"button"},on:{click:e.signUp}},[e._v("Sign Up\n                        ")])])])])])])])},Et=[],xt={name:"Login",props:{},components:{},methods:{signIn:function(){var e=this;o.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(){return e.$router.push("/expenses")})},googleSignIn:function(){var e=this,t=new o.a.auth.GoogleAuthProvider;o.a.auth().signInWithPopup(t).then(function(){return e.$router.push("/expenses")})},githubSignIn:function(){var e=this,t=new o.a.auth.GithubAuthProvider;o.a.auth().signInWithPopup(t).then(function(){return e.$router.push("/expenses")})},signUp:function(){this.$router.push("/signup")}},data:function(){return{email:"",password:""}},mounted:function(){var e=this;o.a.auth().onAuthStateChanged(function(t){t&&e.$router.push("/expenses")})}},bt=xt,gt=(n("fa6e"),Object(m["a"])(bt,vt,Et,!1,null,"595c66b3",null));gt.options.__file="Login.vue";var _t=gt.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4 offset-md-4 col-sm-8 offset-sm-2 text-left"},[n("div",{staticClass:"card mt-5"},[n("div",{staticClass:"card-body"},[n("h3",{staticClass:"text-center"},[e._v("Sign Up")]),n("form",[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Email address"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatedPassword,expression:"repeatedPassword"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Repeat password"},domProps:{value:e.repeatedPassword},on:{input:function(t){t.target.composing||(e.repeatedPassword=t.target.value)}}})]),n("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:e.signUp}},[e._v("Sign up")])])])])])])])},yt=[],St={name:"Login",props:{},components:{},methods:{signUp:function(){var e=this;o.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(){return e.$router.push("/expenses")})}},data:function(){return{email:"",password:"",repeatedPassword:""}},mounted:function(){var e=this;o.a.auth().onAuthStateChanged(function(t){t&&e.$router.push("/expenses")})}},At=St,wt=Object(m["a"])(At,Ct,yt,!1,null,"27c7c086",null);wt.options.__file="SignUp.vue";var Pt=wt.exports;a["a"].use(w["a"]);var Nt=new w["a"]({routes:[{path:"/expenses",component:ce},{path:"/diagrams",component:Ve},{path:"/preset",component:mt},{path:"/login",component:_t},{path:"/signup",component:Pt},{path:"*",redirect:"/expenses"}]});Nt.beforeEach(function(e,t,n){o.a.auth().currentUser||-1!==e.path.indexOf("login")||-1!==e.path.indexOf("signup")?n():n({path:"/login"})}),n.d(t,"db",function(){return Tt}),a["a"].config.productionTip=!1,a["a"].use(s["a"]),o.a.initializeApp({apiKey:"AIzaSyAqrG_0_6JrWIZjqTyaMc2BRDqIIJBZxBc",authDomain:"expencesreport-f8c8c.firebaseapp.com",databaseURL:"https://expencesreport-f8c8c.firebaseio.com",projectId:"expencesreport-f8c8c",storageBucket:"expencesreport-f8c8c.appspot.com",messagingSenderId:"868933781431"});var Tt=o.a.firestore();new a["a"]({router:Nt,render:function(e){return e(A)}}).$mount("#app")},"5fe5":function(e,t,n){"use strict";var a=n("dc8e"),s=n.n(a);s.a},"62e1":function(e,t,n){},"647d":function(e,t,n){},"64a9":function(e,t,n){},"692a":function(e,t,n){"use strict";var a=n("b839"),s=n.n(a);s.a},"6ccc":function(e,t,n){"use strict";var a=n("8841"),s=n.n(a);s.a},"76bc":function(e,t,n){},8841:function(e,t,n){},b763:function(e,t,n){},b839:function(e,t,n){},cc60:function(e,t,n){"use strict";var a=n("ceb9"),s=n.n(a);s.a},ceb9:function(e,t,n){},dc8e:function(e,t,n){},e3f7:function(e,t,n){},fa6e:function(e,t,n){"use strict";var a=n("e3f7"),s=n.n(a);s.a}});
//# sourceMappingURL=app.10769aa9.js.map